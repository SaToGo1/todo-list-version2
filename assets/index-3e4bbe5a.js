var mt=Object.defineProperty;var At=(o,t,e)=>t in o?mt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var i=(o,t,e)=>(At(o,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();function ft(){return`
    <header class="header">
      <h1 class="header__h1">To-Do List V2</h1>
    </header>
  `}const gt="/todo-list-version2/assets/plusBlue-74e97109.svg",jt="/todo-list-version2/assets/circle-33d9fd73.svg",kt="/todo-list-version2/assets/circle-check-4cd9726b.svg",O="main";function Dt(){return`
    <main class="${O}" id="${O}">
      ${Z()}
      <h3>TasksProjects</h3>
      <h3>Completed Tasks</h3>
    </main>
  `}const S="main__addTaskDiv",Y="main__addTaskDiv-focus",y="main__addTaskButton",T="main__addTaskInput",w="main__addTaskIcon";function Z(){return`
    <div class=${S} id=${S}>
      <button class=${y} id="${y}">
        <img class="${w}" id="${w}" 
          src="${gt}"
        >
      </button>
      <input class="${T}" id="${T}" 
        type="text" 
      >
    </div>
  `}const q="main__taskList",K="main__taskListCompleted",tt="main__taskListNotCompleted";function vt({div:o,completedTasks:t,notCompletedTasks:e,name:s,colorCompletedTasks:n,colorNotCompletedTasks:r}){const c=`
  <main class="${O}">
    <h2>${s}</h2>
    ${Z()}
    <h3>Tasks</h3>
    <div class="${q}" id="${tt}">
      ${e.map((a,h)=>{const p=r[h];return B({task:a,completed:!1,color:p})}).join("")}
    </div>
    <h3>Completed</h3>
    <div class="${q}" id="${K}">
      ${t.map((a,h)=>{const p=n[h];return B({task:a,completed:!0,color:p})}).join("")}
    </div>
  </main>`;o.innerHTML=c}const St="main__task",et="main__taskIcon",Tt="main__taskText",Ct="main__taskText-Completed",ot="main__taskDate",st="main__taskDelete";function B({task:o,completed:t,color:e}){let s,n,r="";if(t?(s=kt,n=Ct):(s=jt,n=Tt),e){let c;e==="#ffffff"?c=e:c=e+"33",r=`style="background-color: ${c}"`}return`
  <div class="${St}" ${r} data-task-id="${o.id}">
    <img class="${et}" src="${s}" alt="icon">
    <p class="${n}">${o.title}</p>
    <input type="date" class="${ot}" value="${o.date}">
    <button class="${st}">X</button>
  </div>
  `}function _t({task:o,color:t}){let e,s;o.completed?(e=document.querySelector(`#${K}`),s=!0):(e=document.querySelector(`#${tt}`),s=!1);const n=B({task:o,completed:s,color:t});e.insertAdjacentHTML("beforeend",n)}const Pt="/todo-list-version2/assets/plus-333b0318.svg",It="/todo-list-version2/assets/tag-2f76385c.svg",yt="/todo-list-version2/assets/home-5de888a8.png",wt="/todo-list-version2/assets/today-248fbdf1.svg",$t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAd0lEQVRIx2NgGEDwH4opUsdEa1eiW+DNwMDwBM1F/wlgZHWPGRgYPPFZ+JgIAwnhR8gGMmIJT2oAuLl0jwOqAxZCXiQRYATxgPkAp4tI9fGA+4DcuKCfD0YtGIEWPIHS5BbVDAyQIh8n8GSgrE54xECgwhkFGAAAcH5FLau0834AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjItMTItMDZUMTQ6NTY6NTUrMDA6MDBbqY0HAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIyLTEyLTA2VDE0OjU2OjU1KzAwOjAwKvQ1uwAAAABJRU5ErkJggg==",Mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAgUlEQVRIx2NgGEDwH4opUsdEa1eiW+DNwMDwBM1F/wlgZHWPGRgYPPFZ+JgIAwnhR8gGMmIJT2oAuLl0jwOqAxZCXiQRYATxgAcRtqSIj0+yBRQDFgLyjCTy6e+D0TgY/HFAdQueQGlyi2oGBkiRjxN4MlBWJzxiYGDwoHWoDDMAAFSjUCXUEaotAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTEyLTA2VDE0OjU3OjQzKzAwOjAwGxHTnQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0xMi0wNlQxNDo1Nzo0MyswMDowMGpMayEAAAAASUVORK5CYII=",u="Home",A="Today",f="Tomorrow",g="Week",j="Month",nt="nav__sectionsDiv",Lt="nav__projectsDiv",Ot="nav",Bt="nav__hr",k="nav__container",bt="nav__icon",$="nav__button";function Et(){const o=G();return`
    <nav class="${Ot}">
      <div class="${nt}">
        <h2>Sections</h2>
      </div>
      <hr class="${Bt}">
      <div class="${Lt}">
        <h2>Projects</h2>
        ${o}
      </div>
    </nav>
  `}function Nt({div:o,sectionNames:t}){let e=`
    <div class="${nt}">
  `;t.forEach(s=>{const n=`navSection__${s}-click`,r=Ut({name:s});e+=`
    <div class="${k} ${n}">
      <img src="${r}" class="${bt} ${n}" alt="${s} button">
      <button class="${$} ${n}">${s}</button>
    </div>`}),e+="</div>",o.innerHTML=e}function Ut({name:o}){return o===A?wt:o===f?It:o===g?$t:o===j?Mt:yt}const b="nav__addProjectButton",E="nav__addProjectIcon",G=()=>`
  <button class="${b}" id="${b}">
    <img src="${Pt}" alt="add Project" class="${E}" id="${E}">
  </button>
  `,rt="nav__Confirmation",Ht="navConfirmation__input",N="navConfirmation__accept",U="navConfirmation__cancel";function Rt({div:o}){const t=`
  <div class="${rt}">
    <label>Project Name:</label>
    <input type="text" class="${Ht}" maxlength="40" minlength="1">
    <button class="${N} ${$}" id="${N}">Accept</button>
    <button class="${U} ${$}" id="${U}">Cancel</button
  </div>`,e=document.querySelector(".nav__addProjectButton");e?(o.removeChild(e),o.insertAdjacentHTML("beforeend",t)):console.error("Add Project button not found, sidebar.js")}function Ft({div:o}){const t=G(),e=document.querySelector(".nav__Confirmation");e?(o.removeChild(e),o.insertAdjacentHTML("beforeend",t)):console.error("Confirmation Div not found, sidebar.js")}const it="nav__ProjectDeleteButton",H="nav_projectColor";function ct({id:o,name:t,color:e="#000000"}){return`
  <div class="${k}" data-project-id="${o}">
    <input type="color" class="${H}" value="${e}">
    <button class="${$}">${t}</button>
    <button class="${it}">X</button>
  </div>`}function xt({div:o,id:t,name:e,color:s="#000000"}){const n=ct({id:t,name:e,color:s});o.insertAdjacentHTML("beforeend",n)}function Gt({div:o,projects:t}){const e=G();let s=`
    <h2>Projects</h2>
  `;t.forEach(n=>{const r=ct({id:n.id,name:n.name,color:n.color});s+=`${r}`}),s+=`
    ${e}
  `,o.innerHTML=s}const z="nav__container-active";function Wt({div:o}){document.querySelectorAll(`.${k}`).forEach(s=>s.classList.remove(z));let e=5;for(;!o.classList.contains(k);)if(o=o.parentNode,e--,e===0)return console.error("Infinite bucle on activePageStyle"),0;o.classList.add(z)}class Qt{constructor(){i(this,"renderApp",()=>{const t=ft(),e=Et(),s=Dt(),n=`
    ${t}
    ${e}
    ${s}
    `;this.app.innerHTML=n});i(this,"activePageStyle",({div:t})=>{Wt({div:t})});i(this,"renderSections",({div:t,sectionNames:e})=>{Nt({div:t,sectionNames:e})});i(this,"renderConfirmation",({div:t})=>{Rt({div:t})});i(this,"renderAddProjectButton",({div:t})=>{Ft({div:t})});i(this,"renderProject",({div:t,id:e,name:s})=>{xt({div:t,id:e,name:s})});i(this,"renderAllProjects",({div:t,projects:e})=>{Gt({div:t,projects:e})});i(this,"renderPage",({div:t,completedTasks:e,notCompletedTasks:s,name:n,colorCompletedTasks:r,colorNotCompletedTasks:c})=>{vt({div:t,completedTasks:e,notCompletedTasks:s,name:n,colorCompletedTasks:r,colorNotCompletedTasks:c})});i(this,"renderTask",({task:t,color:e})=>{_t({task:t,color:e})});this.app=document.getElementById("app"),this.renderApp(),this.nav=document.querySelector(".nav")}}function R(){return new Date().toISOString().split("T")[0]}function at(){const o=new Date;return o.setDate(o.getDate()+1),o.toISOString().split("T")[0]}function W(){const o=new Date;return o.setDate(o.getDate()+(6-o.getDay())+1),o.toISOString().split("T")[0]}function Yt(){const o=new Date;return o.setDate(o.getDate()-o.getDay()),o.toISOString().split("T")[0]}function lt(){const o=new Date,t=new Date(o.getFullYear(),o.getMonth()+1,1);return t.setDate(t.getDate()-1),t.setHours(23,59,59,999),t.toISOString().split("T")[0]}function qt(){const o=new Date;return o.setDate(1),o.toISOString().split("T")[0]}function dt({tasks:o}){return o.filter(t=>t.completed===!0)}function ut({tasks:o}){return o.filter(t=>t.completed===!1)}function J({tasks:o,projectID:t}){return o.filter(e=>e.projectID===t)}function zt({tasks:o,section:t}){switch(t){case u:return o;case A:return Jt({tasks:o});case f:return Vt({tasks:o});case g:return Xt({tasks:o});case j:return Zt({tasks:o});default:console.error("default case for filter sections, should not get here")}return o}function Jt({tasks:o}){const t=R();return o.filter(e=>e.date===t)}function Vt({tasks:o}){const t=at();return o.filter(e=>e.date===t)}function Xt({tasks:o}){const t=Yt(),e=W();return o.filter(s=>s.date>=t&&s.date<=e)}function Zt({tasks:o}){const t=qt(),e=lt();return o.filter(s=>s.date>=t&&s.date<=e)}function V({tasks:o,projects:t}){return o.map(e=>{if(e.projectID===null||e.projectID==="")return null;const s=t.find(n=>n.id===e.projectID);return s!=null&&s.color?s.color:null})}class Kt{constructor({view:t,sectionModel:e,taskModel:s,projectModel:n,setCurrentSection:r,getCurrentSection:c}){i(this,"initializeControllerSection",()=>{this._sectionLoad(u),this.setCurrentSection({section:u});const t=this.sectionModel.getSectionNames();this.view.renderSections({div:this.sectionDiv,sectionNames:t}),this.sectionDiv.addEventListener("click",this._SectionDivHandler)});i(this,"_SectionDivHandler",t=>{t.target.classList.contains(`navSection__${u}-click`)?(this._sectionLoad(u),this.view.activePageStyle({div:t.target})):t.target.classList.contains(`navSection__${A}-click`)?(this._sectionLoad(A),this.view.activePageStyle({div:t.target})):t.target.classList.contains(`navSection__${f}-click`)?(this._sectionLoad(f),this.view.activePageStyle({div:t.target})):t.target.classList.contains(`navSection__${g}-click`)?(this._sectionLoad(g),this.view.activePageStyle({div:t.target})):t.target.classList.contains(`navSection__${j}-click`)&&(this._sectionLoad(j),this.view.activePageStyle({div:t.target}))});i(this,"_sectionLoad",t=>{let e=this.taskModel.getAllTasks();e=zt({tasks:e,section:t});const s=dt({tasks:e}),n=ut({tasks:e}),r=this.projectModel.getAllProjects(),c=V({tasks:s,projects:r}),a=V({tasks:n,projects:r});this.view.renderPage({div:this.mainDiv,completedTasks:s,notCompletedTasks:n,name:t,colorCompletedTasks:c,colorNotCompletedTasks:a}),this.setCurrentSection({section:t})});i(this,"reloadSection",({loadHome:t=!1})=>{const e=this.getCurrentSection();e!==""&&this._sectionLoad(e),t===!0&&this._sectionLoad(u)});this.view=t,this.sectionModel=e,this.taskModel=s,this.projectModel=n,this.setCurrentSection=r,this.getCurrentSection=c,this.sectionDiv=document.querySelector(".nav__sectionsDiv"),this.mainDiv=document.querySelector(".main")}}class te{constructor({view:t,projectModel:e,taskModel:s,setCurrentProject:n,getCurrentProject:r,reloadSection:c}){i(this,"initializeControllerProjects",()=>{this.projectsDiv.addEventListener("click",this._projectDivHandler),this.projectsDiv.addEventListener("input",this._colorInput);const t=this.projectModel.getAllProjects();this.view.renderAllProjects({div:this.projectsDiv,projects:t})});i(this,"_projectDivHandler",t=>{if(this._clickOnAddProjectButton(t))return 0;if(this._clickOnConfirmationDiv(t))return 0;if(this._deleteProjectClick(t))return 0;if(this._colorInputClick(t))return 0;this._clickOnProject(t)});i(this,"_clickOnAddProjectButton",t=>t.target.id===b||t.target.id===E?(this.view.renderConfirmation({div:this.projectsDiv}),!0):!1);i(this,"_clickOnConfirmationDiv",t=>{if(t.target.id===N){const e=document.querySelector(".navConfirmation__input").value;if(e==="")return 0;const{newProject:s,isStored:n}=this.projectModel.createProjects({name:e}),r=s.id;if(n)return this.view.renderProject({div:this.projectsDiv,id:r,name:e,color:s.color}),this.view.renderAddProjectButton({div:this.projectsDiv}),!0;console.error("Project Not Stored")}return t.target.id===U?(this.view.renderAddProjectButton({div:this.projectsDiv}),!0):!!t.target.classList.contains(rt)});i(this,"_clickOnProject",t=>{const e=t.target.classList.contains(k)?t.target:t.target.parentNode;if(!e.classList.contains(k))return 0;const s=this.projectModel.getAllProjects(),n=e.dataset.projectId;if(s.some(c=>c.id===n)){const c=s.find(a=>a.id===n);this._projectLoad({projectID:n,project:c}),this.view.activePageStyle({div:t.target})}});i(this,"_projectLoad",({projectID:t,project:e})=>{let s=this.taskModel.getAllTasks();s=J({tasks:s,projectID:t});const n=dt({tasks:s}),r=ut({tasks:s}),c=n.map(h=>e.color),a=r.map(h=>e.color);this.view.renderPage({div:this.mainDiv,completedTasks:n,notCompletedTasks:r,name:e.name,colorCompletedTasks:c,colorNotCompletedTasks:a}),this.setCurrentProject({projectId:t})});i(this,"_deleteProjectClick",t=>{if(t.target.classList.contains(it)){const s=t.target.parentNode,n=s.dataset.projectId,r=this.taskModel.getAllTasks(),c=J({tasks:r,projectID:n});this.taskModel.deleteManyTasks({tasksArray:c}),this.projectModel.deleteProject({id:n}),s.remove();const a=this.getCurrentProject();return a===n&&this.reloadSection({loadHome:!0}),a===null&&this.reloadSection({loadHome:!1}),!0}});i(this,"_colorInput",t=>{const e=t.target;if(e.classList.contains(H)){const s=e.parentNode.dataset.projectId,n=e.value;return this.projectModel.updateProject({id:s,updatedFields:{color:n}}),!0}});i(this,"_colorInputClick",t=>{if(t.target.classList.contains(H))return!0});this.view=t,this.projectModel=e,this.taskModel=s,this.setCurrentProject=n,this.getCurrentProject=r,this.reloadSection=c,this.projectsDiv=document.querySelector(".nav__projectsDiv"),this.mainDiv=document.querySelector(".main")}}class ee{constructor({view:t,taskModel:e,projectModel:s,getCurrentProject:n,getCurrentSection:r,reloadSection:c}){i(this,"initializeControllerMain",()=>{this.mainDiv.addEventListener("focusin",this._addTaskBarFocusOutline),this.mainDiv.addEventListener("focusout",this._addTaskBarFocusOutline),this.mainDiv.addEventListener("click",this._handleClick),this.mainDiv.addEventListener("change",this._dateInputChange)});i(this,"_addTaskBarFocusOutline",t=>{(t.target.id===S||t.target.id===y||t.target.id===T||t.target.id===w)&&(t.type==="focusin"?(document.querySelector(`#${T}`).focus(),document.querySelector(`#${S}`).classList.add(Y)):t.type==="focusout"&&document.querySelector(`#${S}`).classList.remove(Y))});i(this,"_handleClick",t=>{this._AddTask(t),this._completeTaskClick(t),this._deleteTaskClick(t)});i(this,"_AddTask",t=>{if(t.target.id===y||t.target.id===w){const e=document.querySelector(`#${T}`).value;if(e==="")return 0;const s=this.getCurrentProjectID(),n=this._getDateBySection(),{newTask:r,isStored:c}=this.taskModel.createTask({taskTitle:e,projectID:s,date:n}),{project:a}=this.projectModel.getProject({id:s});c?this.view.renderTask({task:r,color:a==null?void 0:a.color}):console.error("Task Not Stored")}});i(this,"_getDateBySection",()=>{switch(this.getCurrentSection()){case u:case A:return R();case f:return at();case g:return W();case j:return lt();default:return R()}});i(this,"_completeTaskClick",t=>{if(t.target.classList.contains(et)){const e=t.target.parentNode,s=e.dataset.taskId,{task:n,isStored:r}=this.taskModel.getTask({id:s});if(!r)return console.error("task not stored"),0;const c=n.completed,{updatedTask:a,isUpdated:h}=this.taskModel.updateTask({id:s,updatedFields:{completed:!c}});if(!h)return console.error("task not updated"),0;const{project:p}=this.projectModel.getProject({id:n.projectID});e.remove(),this.view.renderTask({task:a,color:p==null?void 0:p.color});const Q=document.querySelector(`[data-task-id="${s}"]`);Q.classList.add("activeTask"),setTimeout(()=>{Q.classList.remove("activeTask")},2e3)}});i(this,"_dateInputChange",t=>{if(t.target.classList.contains(ot)){const e=t.target.value,n=t.target.parentNode.dataset.taskId,{isStored:r}=this.taskModel.getTask({id:n});if(!r)return console.error("task not stored on change date"),0;this.taskModel.updateTask({id:n,updatedFields:{date:e}}),this.reloadSection({})}});i(this,"_deleteTaskClick",t=>{const e=t.target;if(e.classList.contains(st)){const s=e.parentNode,n=s.dataset.taskId;this.taskModel.deleteTask({id:n}),s.remove()}});this.view=t,this.taskModel=e,this.projectModel=s,this.getCurrentProjectID=n,this.getCurrentSection=r,this.reloadSection=c,this.mainDiv=document.querySelector(".main")}}class I{constructor({id:t,name:e,color:s="#000000"}){this.id=t,this.name=e,this.color=s}}let C;const oe=new Uint8Array(16);function se(){if(!C&&(C=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!C))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return C(oe)}const l=[];for(let o=0;o<256;++o)l.push((o+256).toString(16).slice(1));function ne(o,t=0){return l[o[t+0]]+l[o[t+1]]+l[o[t+2]]+l[o[t+3]]+"-"+l[o[t+4]]+l[o[t+5]]+"-"+l[o[t+6]]+l[o[t+7]]+"-"+l[o[t+8]]+l[o[t+9]]+"-"+l[o[t+10]]+l[o[t+11]]+l[o[t+12]]+l[o[t+13]]+l[o[t+14]]+l[o[t+15]]}const re=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),X={randomUUID:re};function ht(o,t,e){if(X.randomUUID&&!t&&!o)return X.randomUUID();o=o||{};const s=o.random||(o.rng||se)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let n=0;n<16;++n)t[e+n]=s[n];return t}return ne(s)}class d{constructor({id:t,projectID:e=null,title:s,description:n="",date:r="",completed:c=!1}){this.id=t,this.projectID=e,this.title=s,this.description=n,this.date=r,this.completed=c}}const ie=[new I({id:"1",name:"House",color:"#00ff00"}),new I({id:"2",name:"Exercising",color:"#ff0000"}),new I({id:"3",name:"Work",color:"#00aaff"})],_=new Date().toISOString().split("T")[0],F=new Date;F.setDate(F.getDate()-1);const ce=F.toISOString().split("T")[0],x=new Date;x.setDate(x.getDate()+1);const ae=x.toISOString().split("T")[0],le=W(),de=[new d({id:"1",projectID:"1",title:"Clean the bedroom",description:"",date:_,completed:!1}),new d({id:"2",projectID:"1",title:"Clean the toilet",description:"",date:ae,completed:!1}),new d({id:"3",projectID:"2",title:"Go for a Walk",description:"",date:_,completed:!1}),new d({id:"4",projectID:"2",title:"HIIT - High Intensity Interval Training",description:"",date:ce,completed:!0}),new d({id:"5",projectID:"3",title:"Start the new Project",description:"",date:_,completed:!1}),new d({id:"6",projectID:"3",title:"Organize the different tasks of the project",description:"",date:le,completed:!1}),new d({id:"7",projectID:"",title:"Watch a film",description:"Description 7",date:_,completed:!1})];function m({item:o,array:t}){const e=JSON.stringify(t);localStorage.setItem(o,e)}function pt({item:o}){const t=localStorage.getItem(o);return t?{isStoredInLocal:!0,storedData:JSON.parse(t)}:{isStoredInLocal:!1,storedData:null}}const P="projectArray";class ue{constructor(){i(this,"createProjects",({name:t})=>{const e=ht(),s=new I({id:e,name:t});return this.projects.push(s),m({item:P,array:this.projects}),{newProject:s,isStored:!0}});i(this,"getProject",({id:t})=>{const e=this.projects.find(n=>n.id===t);return{project:e,isStored:e!==void 0}});i(this,"deleteProject",({id:t})=>(console.log(t),this.projects=this.projects.filter(e=>e.id!==t),console.log(this.projects),m({item:P,array:this.projects}),{isDeleted:!0}));i(this,"updateProject",({id:t,updatedFields:e})=>{const s=this.projects.find(n=>n.id===t);return s?(Object.assign(s,e),m({item:P,array:this.projects}),{updatedProject:s,isUpdated:!0}):{updatedProject:null,isUpdated:!1}});const{isStoredInLocal:t,storedData:e}=pt({item:P});t?this.projects=e:(this.projects=[],this.projects.push(...ie))}getAllProjects(){return this.projects}}class D{constructor({name:t}){this.name=t}}class he{constructor(){this.sections=[],this.initialize()}initialize(){const t=new D({name:u}),e=new D({name:A}),s=new D({name:f}),n=new D({name:g}),r=new D({name:j});this.sections=[t,e,s,n,r]}getSectionNames(){return this.sections.map(t=>t.name)}}const v="taskArray";class pe{constructor(){i(this,"getAllTasks",()=>this.tasks);i(this,"getTask",({id:t})=>{const e=this.tasks.find(n=>n.id===t);return{task:e,isStored:e!==void 0}});i(this,"createTask",({taskTitle:t,projectID:e=null,description:s="",date:n=""})=>{const r=ht(),c=new d({id:r,projectID:e,title:t,description:s,date:n,completed:!1});return this.tasks.push(c),m({item:v,array:this.tasks}),{newTask:c,isStored:!0}});i(this,"updateTask",({id:t,updatedFields:e})=>{const s=this.tasks.find(n=>n.id===t);return s?(Object.assign(s,e),m({item:v,array:this.tasks}),{updatedTask:s,isUpdated:!0}):{updatedTask:null,isUpdated:!1}});i(this,"deleteTask",({id:t})=>(this.tasks=this.tasks.filter(e=>e.id!==t),m({item:v,array:this.tasks}),{isDeleted:!0}));i(this,"deleteManyTasks",({tasksArray:t=[]})=>{if(t.length===0)return this.tasks=[],0;const e=new Set(t.map(s=>s.id));return this.tasks=this.tasks.filter(s=>!e.has(s.id)),m({item:v,array:this.tasks}),{isDeleted:!0}});const{isStoredInLocal:t,storedData:e}=pt({item:v});t?this.tasks=e:(this.tasks=[],this.tasks.push(...de))}}const me=new he,M=new ue,L=new pe;class Ae{constructor(t){i(this,"initializeController",()=>(this.controllerSections.initializeControllerSection(),this.controllerProjects.initializeControllerProjects(),this.controllerMain.initializeControllerMain(),0));i(this,"setCurrentSection",({section:t})=>{this.currentProject=null,this.currentSection=t});i(this,"getCurrentSection",()=>this.currentSection);i(this,"setCurrentProject",({projectId:t})=>{this.currentSection="",this.currentProject=t});i(this,"getCurrentProject",()=>this.currentProject);i(this,"reloadSection",({loadHome:t=!1})=>{this.controllerSections.reloadSection({loadHome:t})});this.view=t,this.currentSection="home",this.currentProject=null,this.controllerSections=new Kt({view:t,sectionModel:me,taskModel:L,projectModel:M,setCurrentSection:this.setCurrentSection,getCurrentSection:this.getCurrentSection}),this.controllerProjects=new te({view:t,projectModel:M,taskModel:L,setCurrentProject:this.setCurrentProject,getCurrentProject:this.getCurrentProject,reloadSection:this.reloadSection}),this.controllerMain=new ee({view:t,taskModel:L,projectModel:M,getCurrentProject:this.getCurrentProject,getCurrentSection:this.getCurrentSection,reloadSection:this.reloadSection})}}const fe=new Qt,ge=new Ae(fe);ge.initializeController();
