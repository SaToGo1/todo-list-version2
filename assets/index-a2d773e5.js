var At=Object.defineProperty;var gt=(o,t,e)=>t in o?At(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var i=(o,t,e)=>(gt(o,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();function jt(){return`
    <header class="header">
      <h1 class="header__h1">To-Do List V2</h1>
    </header>
  `}const ft="/assets/plusBlue-74e97109.svg",kt="/assets/circle-33d9fd73.svg",Dt="/assets/circle-check-4cd9726b.svg",O="main";function Tt(){return`
    <main class="${O}" id="${O}">
      ${Z()}
      <h3>TasksProjects</h3>
      <h3>Completed Tasks</h3>
    </main>
  `}const S="main__addTaskDiv",Q="main__addTaskDiv-focus",P="main__addTaskButton",v="main__addTaskInput",I="main__addTaskIcon";function Z(){return`
    <div class=${S} id=${S}>
      <button class=${P} id="${P}">
        <img class="${I}" id="${I}" 
          src="${ft}"
        >
      </button>
      <input class="${v}" id="${v}" 
        type="text" 
      >
    </div>
  `}const q="main__taskList",K="main__taskListCompleted",tt="main__taskListNotCompleted";function St({div:o,completedTasks:t,notCompletedTasks:e,name:s,colorCompletedTasks:n,colorNotCompletedTasks:r}){const c=`
  <main class="${O}">
    <h2>${s}</h2>
    ${Z()}
    <h3>Tasks</h3>
    <div class="${q}" id="${tt}">
      ${e.map((a,u)=>{const p=r[u];return B({task:a,completed:!1,color:p})}).join("")}
    </div>
    <h3>Completed</h3>
    <div class="${q}" id="${K}">
      ${t.map((a,u)=>{const p=n[u];return B({task:a,completed:!0,color:p})}).join("")}
    </div>
  </main>`;o.innerHTML=c}const vt="main__task",et="main__taskIcon",Ct="main__taskText",_t="main__taskText-Completed",ot="main__taskDate",st="main__taskDelete";function B({task:o,completed:t,color:e}){let s,n,r="";if(t?(s=Dt,n=_t):(s=kt,n=Ct),e){let c;e==="#ffffff"?c=e:c=e+"33",r=`style="background-color: ${c}"`}return`
  <div class="${vt}" ${r} data-task-id="${o.id}">
    <img class="${et}" src="${s}" alt="icon">
    <p class="${n}">${o.title}</p>
    <input type="date" class="${ot}" value="${o.date}">
    <button class="${st}">X</button>
  </div>
  `}function Pt({task:o,color:t}){let e,s;o.completed?(e=document.querySelector(`#${K}`),s=!0):(e=document.querySelector(`#${tt}`),s=!1);const n=B({task:o,completed:s,color:t});e.insertAdjacentHTML("beforeend",n)}const It="/assets/plus-333b0318.svg",wt="/assets/tag-2f76385c.svg",yt="/assets/home-5de888a8.png",Mt="/assets/today-248fbdf1.svg",$t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAd0lEQVRIx2NgGEDwH4opUsdEa1eiW+DNwMDwBM1F/wlgZHWPGRgYPPFZ+JgIAwnhR8gGMmIJT2oAuLl0jwOqAxZCXiQRYATxgPkAp4tI9fGA+4DcuKCfD0YtGIEWPIHS5BbVDAyQIh8n8GSgrE54xECgwhkFGAAAcH5FLau0834AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjItMTItMDZUMTQ6NTY6NTUrMDA6MDBbqY0HAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIyLTEyLTA2VDE0OjU2OjU1KzAwOjAwKvQ1uwAAAABJRU5ErkJggg==",Lt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAgUlEQVRIx2NgGEDwH4opUsdEa1eiW+DNwMDwBM1F/wlgZHWPGRgYPPFZ+JgIAwnhR8gGMmIJT2oAuLl0jwOqAxZCXiQRYATxgAcRtqSIj0+yBRQDFgLyjCTy6e+D0TgY/HFAdQueQGlyi2oGBkiRjxN4MlBWJzxiYGDwoHWoDDMAAFSjUCXUEaotAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTEyLTA2VDE0OjU3OjQzKzAwOjAwGxHTnQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0xMi0wNlQxNDo1Nzo0MyswMDowMGpMayEAAAAASUVORK5CYII=",h="Home",g="Today",j="Tomorrow",f="Week",k="Month",nt="nav__sectionsDiv",Ot="nav__projectsDiv",Bt="nav",bt="nav__hr",w="nav__container",Et="nav__icon",y="nav__button";function Nt(){const o=Y();return`
    <nav class="${Bt}">
      <div class="${nt}">
        <h2>Sections</h2>
      </div>
      <hr class="${bt}">
      <div class="${Ot}">
        <h2>Projects</h2>
        ${o}
      </div>
    </nav>
  `}function Ut({div:o,sectionNames:t}){let e=`
    <div class="${nt}">
  `;t.forEach(s=>{const n=`navSection__${s}-click`,r=Rt({name:s});e+=`
    <div class="${w} ${n}">
      <img src="${r}" class="${Et} ${n}" alt="${s} button">
      <button class="${y} ${n}">${s}</button>
    </div>`}),e+="</div>",o.innerHTML=e}function Rt({name:o}){return o===g?Mt:o===j?wt:o===f?$t:o===k?Lt:yt}const b="nav__addProjectButton",E="nav__addProjectIcon",Y=()=>`
  <button class="${b}" id="${b}">
    <img src="${It}" alt="add Project" class="${E}" id="${E}">
  </button>
  `,Ft="nav__Confirmation",Ht="navConfirmation__input",N="navConfirmation__accept",U="navConfirmation__cancel";function xt({div:o}){const t=`
  <div class="${Ft}">
    <label>Project Name:</label>
    <input type="text" class="${Ht}" maxlength="40" minlength="1">
    <button class="${N} ${y}" id="${N}">Accept</button>
    <button class="${U} ${y}" id="${U}">Cancel</button
  </div>`,e=document.querySelector(".nav__addProjectButton");e?(o.removeChild(e),o.insertAdjacentHTML("beforeend",t)):console.error("Add Project button not found, sidebar.js")}function Yt({div:o}){const t=Y(),e=document.querySelector(".nav__Confirmation");e?(o.removeChild(e),o.insertAdjacentHTML("beforeend",t)):console.error("Confirmation Div not found, sidebar.js")}const rt="nav__ProjectDeleteButton",R="nav_projectColor";function it({id:o,name:t,color:e="#000000"}){return`
  <div class="${w}" data-project-id="${o}">
    <input type="color" class="${R}" value="${e}">
    <button class="${y}">${t}</button>
    <button class="${rt}">X</button>
  </div>`}function Wt({div:o,id:t,name:e,color:s="#000000"}){const n=it({id:t,name:e,color:s});o.insertAdjacentHTML("beforeend",n)}function Gt({div:o,projects:t}){const e=Y();let s=`
    <h2>Projects</h2>
  `;t.forEach(n=>{const r=it({id:n.id,name:n.name,color:n.color});s+=`${r}`}),s+=`
    ${e}
  `,o.innerHTML=s}const J="nav__container-active";function Qt({div:o}){document.querySelectorAll(`.${w}`).forEach(s=>s.classList.remove(J));let e=5;for(;!o.classList.contains(w);)if(o=o.parentNode,e--,e===0)return console.error("Infinite bucle on activePageStyle"),0;o.classList.add(J)}class qt{constructor(){i(this,"renderApp",()=>{const t=jt(),e=Nt(),s=Tt(),n=`
    ${t}
    ${e}
    ${s}
    `;this.app.innerHTML=n});i(this,"activePageStyle",({div:t})=>{Qt({div:t})});i(this,"renderSections",({div:t,sectionNames:e})=>{Ut({div:t,sectionNames:e})});i(this,"renderConfirmation",({div:t})=>{xt({div:t})});i(this,"renderAddProjectButton",({div:t})=>{Yt({div:t})});i(this,"renderProject",({div:t,id:e,name:s})=>{Wt({div:t,id:e,name:s})});i(this,"renderAllProjects",({div:t,projects:e})=>{Gt({div:t,projects:e})});i(this,"renderPage",({div:t,completedTasks:e,notCompletedTasks:s,name:n,colorCompletedTasks:r,colorNotCompletedTasks:c})=>{St({div:t,completedTasks:e,notCompletedTasks:s,name:n,colorCompletedTasks:r,colorNotCompletedTasks:c})});i(this,"renderTask",({task:t,color:e})=>{Pt({task:t,color:e})});this.app=document.getElementById("app"),this.renderApp(),this.nav=document.querySelector(".nav")}}function F(){return new Date().toISOString().split("T")[0]}function ct(){const o=new Date;return o.setDate(o.getDate()+1),o.toISOString().split("T")[0]}function at(){const o=new Date;return o.setDate(o.getDate()+(6-o.getDay())+1),o.toISOString().split("T")[0]}function Jt(){const o=new Date;return o.setDate(o.getDate()-o.getDay()),o.toISOString().split("T")[0]}function dt(){const o=new Date,t=new Date(o.getFullYear(),o.getMonth()+1,1);return t.setDate(t.getDate()-1),t.setHours(23,59,59,999),t.toISOString().split("T")[0]}function zt(){const o=new Date;return o.setDate(1),o.toISOString().split("T")[0]}function lt({tasks:o}){return o.filter(t=>t.completed===!0)}function ut({tasks:o}){return o.filter(t=>t.completed===!1)}function z({tasks:o,projectID:t}){return o.filter(e=>e.projectID===t)}function Vt({tasks:o,section:t}){switch(t){case h:return o;case g:return Xt({tasks:o});case j:return Zt({tasks:o});case f:return Kt({tasks:o});case k:return te({tasks:o});default:console.error("default case for filter sections, should not get here")}return o}function Xt({tasks:o}){const t=F();return o.filter(e=>e.date===t)}function Zt({tasks:o}){const t=ct();return o.filter(e=>e.date===t)}function Kt({tasks:o}){const t=Jt(),e=at();return o.filter(s=>s.date>=t&&s.date<=e)}function te({tasks:o}){const t=zt(),e=dt();return o.filter(s=>s.date>=t&&s.date<=e)}function V({tasks:o,projects:t}){return o.map(e=>e.projectID===null?null:t.find(n=>n.id===e.projectID).color)}class ee{constructor({view:t,sectionModel:e,taskModel:s,projectModel:n,setCurrentSection:r,getCurrentSection:c}){i(this,"initializeControllerSection",()=>{this._sectionLoad(h),this.setCurrentSection({section:h});const t=this.sectionModel.getSectionNames();this.view.renderSections({div:this.sectionDiv,sectionNames:t}),this.sectionDiv.addEventListener("click",this._SectionDivHandler)});i(this,"_SectionDivHandler",t=>{t.target.classList.contains(`navSection__${h}-click`)?(this._sectionLoad(h),this.view.activePageStyle({div:t.target})):t.target.classList.contains(`navSection__${g}-click`)?(this._sectionLoad(g),this.view.activePageStyle({div:t.target})):t.target.classList.contains(`navSection__${j}-click`)?(this._sectionLoad(j),this.view.activePageStyle({div:t.target})):t.target.classList.contains(`navSection__${f}-click`)?(this._sectionLoad(f),this.view.activePageStyle({div:t.target})):t.target.classList.contains(`navSection__${k}-click`)&&(this._sectionLoad(k),this.view.activePageStyle({div:t.target}))});i(this,"_sectionLoad",t=>{let e=this.taskModel.getAllTasks();e=Vt({tasks:e,section:t});const s=lt({tasks:e}),n=ut({tasks:e}),r=this.projectModel.getAllProjects(),c=V({tasks:s,projects:r}),a=V({tasks:n,projects:r});this.view.renderPage({div:this.mainDiv,completedTasks:s,notCompletedTasks:n,name:t,colorCompletedTasks:c,colorNotCompletedTasks:a}),this.setCurrentSection({section:t})});i(this,"reloadSection",({loadHome:t=!1})=>{const e=this.getCurrentSection();e!==""&&this._sectionLoad(e),t===!0&&this._sectionLoad(h)});this.view=t,this.sectionModel=e,this.taskModel=s,this.projectModel=n,this.setCurrentSection=r,this.getCurrentSection=c,this.sectionDiv=document.querySelector(".nav__sectionsDiv"),this.mainDiv=document.querySelector(".main")}}class oe{constructor({view:t,projectModel:e,taskModel:s,setCurrentProject:n,getCurrentProject:r,reloadSection:c}){i(this,"initializeControllerProjects",()=>{this.projectsDiv.addEventListener("click",this._projectDivHandler),this.projectsDiv.addEventListener("input",this._colorInput);const t=this.projectModel.getAllProjects();this.view.renderAllProjects({div:this.projectsDiv,projects:t})});i(this,"_projectDivHandler",t=>{if(this._clickOnAddProjectButton(t))return 0;if(this._clickOnConfirmationDiv(t))return 0;if(this._deleteProjectClick(t))return 0;if(this._colorInputClick(t))return 0;this._clickOnProject(t)});i(this,"_clickOnAddProjectButton",t=>t.target.id===b||t.target.id===E?(this.view.renderConfirmation({div:this.projectsDiv}),!0):!1);i(this,"_clickOnConfirmationDiv",t=>{if(t.target.id===N){const e=document.querySelector(".navConfirmation__input").value;if(e==="")return 0;const{newProject:s,isStored:n}=this.projectModel.createProjects({name:e}),r=s.id;if(n)return this.view.renderProject({div:this.projectsDiv,id:r,name:e,color:s.color}),this.view.renderAddProjectButton({div:this.projectsDiv}),!0;console.error("Project Not Stored")}return t.target.id===U?(this.view.renderAddProjectButton({div:this.projectsDiv}),!0):!1});i(this,"_clickOnProject",t=>{const e=this.projectModel.getAllProjects(),s=t.target.dataset.projectId,n=t.target.parentNode.dataset.projectId,r=e.some(a=>a.id===s),c=e.some(a=>a.id===n);if(r||c){const a=r?s:n,u=e.find(p=>p.id===a);this._projectLoad({projectID:a,project:u}),this.view.activePageStyle({div:t.target})}});i(this,"_projectLoad",({projectID:t,project:e})=>{let s=this.taskModel.getAllTasks();s=z({tasks:s,projectID:t});const n=lt({tasks:s}),r=ut({tasks:s}),c=n.map(u=>e.color),a=r.map(u=>e.color);this.view.renderPage({div:this.mainDiv,completedTasks:n,notCompletedTasks:r,name:e.name,colorCompletedTasks:c,colorNotCompletedTasks:a}),this.setCurrentProject({projectId:t})});i(this,"_deleteProjectClick",t=>{if(t.target.classList.contains(rt)){const s=t.target.parentNode,n=s.dataset.projectId,r=this.taskModel.getAllTasks(),c=z({tasks:r,projectID:n});this.taskModel.deleteManyTasks({tasksArray:c}),this.projectModel.deleteProject({id:n}),s.remove();const a=this.getCurrentProject();return a===n&&this.reloadSection({loadHome:!0}),a===null&&this.reloadSection({loadHome:!1}),!0}});i(this,"_colorInput",t=>{const e=t.target;if(e.classList.contains(R)){const s=e.parentNode.dataset.projectId,n=e.value;return console.log(n),this.projectModel.updateProject({id:s,updatedFields:{color:n}}),!0}});i(this,"_colorInputClick",t=>{if(t.target.classList.contains(R))return!0});this.view=t,this.projectModel=e,this.taskModel=s,this.setCurrentProject=n,this.getCurrentProject=r,this.reloadSection=c,this.projectsDiv=document.querySelector(".nav__projectsDiv"),this.mainDiv=document.querySelector(".main")}}class se{constructor({view:t,taskModel:e,projectModel:s,getCurrentProject:n,getCurrentSection:r,reloadSection:c}){i(this,"initializeControllerMain",()=>{this.mainDiv.addEventListener("focusin",this._addTaskBarFocusOutline),this.mainDiv.addEventListener("focusout",this._addTaskBarFocusOutline),this.mainDiv.addEventListener("click",this._handleClick),this.mainDiv.addEventListener("change",this._dateInputChange)});i(this,"_addTaskBarFocusOutline",t=>{(t.target.id===S||t.target.id===P||t.target.id===v||t.target.id===I)&&(t.type==="focusin"?(document.querySelector(`#${v}`).focus(),document.querySelector(`#${S}`).classList.add(Q)):t.type==="focusout"&&document.querySelector(`#${S}`).classList.remove(Q))});i(this,"_handleClick",t=>{this._AddTask(t),this._completeTaskClick(t),this._deleteTaskClick(t)});i(this,"_AddTask",t=>{if(t.target.id===P||t.target.id===I){const e=document.querySelector(`#${v}`).value;if(e==="")return 0;const s=this.getCurrentProjectID(),n=this._getDateBySection(),{newTask:r,isStored:c}=this.taskModel.createTask({taskTitle:e,projectID:s,date:n}),{project:a}=this.projectModel.getProject({id:s});c?this.view.renderTask({task:r,color:a==null?void 0:a.color}):console.error("Task Not Stored")}});i(this,"_getDateBySection",()=>{switch(this.getCurrentSection()){case h:case g:return F();case j:return ct();case f:return at();case k:return dt();default:return F()}});i(this,"_completeTaskClick",t=>{if(t.target.classList.contains(et)){const e=t.target.parentNode,s=e.dataset.taskId,{task:n,isStored:r}=this.taskModel.getTask({id:s});if(!r)return console.error("task not stored"),0;const c=n.completed,{updatedTask:a,isUpdated:u}=this.taskModel.updateTask({id:s,updatedFields:{completed:!c}});if(!u)return console.error("task not updated"),0;const{project:p}=this.projectModel.getProject({id:n.projectID});e.remove(),this.view.renderTask({task:a,color:p==null?void 0:p.color});const G=document.querySelector(`[data-task-id="${s}"]`);G.classList.add("activeTask"),setTimeout(()=>{G.classList.remove("activeTask")},2e3)}});i(this,"_dateInputChange",t=>{if(t.target.classList.contains(ot)){const e=t.target.value,n=t.target.parentNode.dataset.taskId,{isStored:r}=this.taskModel.getTask({id:n});if(!r)return console.error("task not stored on change date"),0;this.taskModel.updateTask({id:n,updatedFields:{date:e}}),this.reloadSection({})}});i(this,"_deleteTaskClick",t=>{const e=t.target;if(e.classList.contains(st)){const s=e.parentNode,n=s.dataset.taskId;this.taskModel.deleteTask({id:n}),s.remove()}});this.view=t,this.taskModel=e,this.projectModel=s,this.getCurrentProjectID=n,this.getCurrentSection=r,this.reloadSection=c,this.mainDiv=document.querySelector(".main")}}class H{constructor({id:t,name:e,color:s="#000000"}){this.id=t,this.name=e,this.color=s}}let C;const ne=new Uint8Array(16);function re(){if(!C&&(C=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!C))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return C(ne)}const d=[];for(let o=0;o<256;++o)d.push((o+256).toString(16).slice(1));function ie(o,t=0){return d[o[t+0]]+d[o[t+1]]+d[o[t+2]]+d[o[t+3]]+"-"+d[o[t+4]]+d[o[t+5]]+"-"+d[o[t+6]]+d[o[t+7]]+"-"+d[o[t+8]]+d[o[t+9]]+"-"+d[o[t+10]]+d[o[t+11]]+d[o[t+12]]+d[o[t+13]]+d[o[t+14]]+d[o[t+15]]}const ce=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),X={randomUUID:ce};function pt(o,t,e){if(X.randomUUID&&!t&&!o)return X.randomUUID();o=o||{};const s=o.random||(o.rng||re)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let n=0;n<16;++n)t[e+n]=s[n];return t}return ie(s)}class l{constructor({id:t,projectID:e=null,title:s,description:n="",date:r="",completed:c=!1}){this.id=t,this.projectID=e,this.title=s,this.description=n,this.date=r,this.completed=c}}const ae=[new H({id:"13",name:"Test Project 13",color:"#000000"}),new H({id:"14",name:"Test Project 14",color:"#000000"})],M=new Date().toISOString().split("T")[0],x=new Date;x.setDate(x.getDate()+1);const de=x.toISOString().split("T")[0],A=new Date,le=Math.floor(Math.random()*new Date(A.getFullYear(),A.getMonth()+1,0).getDate())+1,ue=new Date(A.getFullYear(),A.getMonth(),le),pe=ue.toISOString().split("T")[0],W=new Date(A);W.setDate(A.getDate()-A.getDay());const he=Math.floor(Math.random()*7),ht=new Date(W);ht.setDate(W.getDate()+he);const me=ht.toISOString().split("T")[0],Ae=[new l({id:"1",projectID:"project1",title:"Task 1",description:"Description 1",date:"2023-09-10",completed:!1}),new l({id:"2",projectID:"project1",title:"Task 2",description:"Description 2",date:"2023-09-11",completed:!1}),new l({id:"3",projectID:"project2",title:"Task 3",description:"Description 3",date:"2023-09-30",completed:!0}),new l({id:"4",projectID:null,title:"Task 4",description:"Description 4",date:"2023-09-29",completed:!1}),new l({id:"5",projectID:"project2",title:"Task 5",description:"Description 5",date:"",completed:!1}),new l({id:"6",projectID:"project2",title:"Task 6",description:"Description 6",date:"2023-07-20",completed:!0}),new l({id:"7",projectID:"project3",title:"Task 7 TODAY",description:"Description 7",date:M,completed:!1}),new l({id:"8",projectID:"project3",title:"Task 8 TODAY",description:"Description 8",date:M,completed:!1}),new l({id:"9",projectID:"project4",title:"Task 9 TODAY",description:"Description 9",date:M,completed:!0}),new l({id:"10",projectID:"project5",title:"Task 10 Tomorrow",description:"Description 10",date:de,completed:!1}),new l({id:"11",projectID:"project5",title:"Task 11 Week",description:"Description 11",date:me,completed:!1}),new l({id:"12",projectID:"project6",title:"Task 12 Month",description:"Description 12",date:pe,completed:!0}),new l({id:"13",projectID:"13",title:"Task 13 Project TEST",description:"Description 13",date:"",completed:!0}),new l({id:"14",projectID:"14",title:"Task 14 Project TEST",description:"Description 14",date:"",completed:!1}),new l({id:"15",projectID:"13",title:"Task 15 Project TEST",description:"Description 15",date:"",completed:!1})];function m({item:o,array:t}){const e=JSON.stringify(t);localStorage.setItem(o,e)}function mt({item:o}){const t=localStorage.getItem(o);return t?{isStoredInLocal:!0,storedData:JSON.parse(t)}:{isStoredInLocal:!1,storedData:null}}const _="projectArray";class ge{constructor(){i(this,"createProjects",({name:t})=>{const e=pt(),s=new H({id:e,name:t});return this.projects.push(s),m({item:_,array:this.projects}),{newProject:s,isStored:!0}});i(this,"getProject",({id:t})=>{const e=this.projects.find(n=>n.id===t);return{project:e,isStored:e!==void 0}});i(this,"deleteProject",({id:t})=>(console.log(t),this.projects=this.projects.filter(e=>e.id!==t),console.log(this.projects),m({item:_,array:this.projects}),{isDeleted:!0}));i(this,"updateProject",({id:t,updatedFields:e})=>{const s=this.projects.find(n=>n.id===t);return s?(Object.assign(s,e),m({item:_,array:this.projects}),{updatedProject:s,isUpdated:!0}):{updatedProject:null,isUpdated:!1}});const{isStoredInLocal:t,storedData:e}=mt({item:_});t?this.projects=e:(this.projects=[],this.projects.push(...ae))}getAllProjects(){return this.projects}}class D{constructor({name:t}){this.name=t}}class je{constructor(){this.sections=[],this.initialize()}initialize(){const t=new D({name:h}),e=new D({name:g}),s=new D({name:j}),n=new D({name:f}),r=new D({name:k});this.sections=[t,e,s,n,r]}getSectionNames(){return this.sections.map(t=>t.name)}}const T="taskArray";class fe{constructor(){i(this,"getAllTasks",()=>this.tasks);i(this,"getTask",({id:t})=>{const e=this.tasks.find(n=>n.id===t);return{task:e,isStored:e!==void 0}});i(this,"createTask",({taskTitle:t,projectID:e=null,description:s="",date:n=""})=>{const r=pt(),c=new l({id:r,projectID:e,title:t,description:s,date:n,completed:!1});return this.tasks.push(c),m({item:T,array:this.tasks}),{newTask:c,isStored:!0}});i(this,"updateTask",({id:t,updatedFields:e})=>{const s=this.tasks.find(n=>n.id===t);return s?(Object.assign(s,e),m({item:T,array:this.tasks}),{updatedTask:s,isUpdated:!0}):{updatedTask:null,isUpdated:!1}});i(this,"deleteTask",({id:t})=>(this.tasks=this.tasks.filter(e=>e.id!==t),m({item:T,array:this.tasks}),{isDeleted:!0}));i(this,"deleteManyTasks",({tasksArray:t=[]})=>{if(t.length===0)return this.tasks=[],0;const e=new Set(t.map(s=>s.id));return this.tasks=this.tasks.filter(s=>!e.has(s.id)),m({item:T,array:this.tasks}),{isDeleted:!0}});const{isStoredInLocal:t,storedData:e}=mt({item:T});t?this.tasks=e:(this.tasks=[],this.tasks.push(...Ae))}}const ke=new je,$=new ge,L=new fe;class De{constructor(t){i(this,"initializeController",()=>(this.controllerSections.initializeControllerSection(),this.controllerProjects.initializeControllerProjects(),this.controllerMain.initializeControllerMain(),0));i(this,"setCurrentSection",({section:t})=>{this.currentProject=null,this.currentSection=t});i(this,"getCurrentSection",()=>this.currentSection);i(this,"setCurrentProject",({projectId:t})=>{this.currentSection="",this.currentProject=t});i(this,"getCurrentProject",()=>this.currentProject);i(this,"reloadSection",({loadHome:t=!1})=>{this.controllerSections.reloadSection({loadHome:t})});this.view=t,this.currentSection="home",this.currentProject=null,this.controllerSections=new ee({view:t,sectionModel:ke,taskModel:L,projectModel:$,setCurrentSection:this.setCurrentSection,getCurrentSection:this.getCurrentSection}),this.controllerProjects=new oe({view:t,projectModel:$,taskModel:L,setCurrentProject:this.setCurrentProject,getCurrentProject:this.getCurrentProject,reloadSection:this.reloadSection}),this.controllerMain=new se({view:t,taskModel:L,projectModel:$,getCurrentProject:this.getCurrentProject,getCurrentSection:this.getCurrentSection,reloadSection:this.reloadSection})}}const Te=new qt,Se=new De(Te);Se.initializeController();
